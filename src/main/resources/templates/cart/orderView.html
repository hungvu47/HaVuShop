<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
   <meta charset="UTF-8">
   <title>HaVu Studios</title>
   <link rel="stylesheet" th:href="@{/css/customerAccount/checkout.css}">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
         integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
         crossorigin="anonymous"
         referrerpolicy="no-referrer" />
</head>
<body>
   <div data-tg-refresh="checkout" id="checkout" class="content">
      <form id="checkoutForm" method="post" th:action="@{/checkout}">
         <div class="wrap">
            <main class="main">
               <header class="main__header">
                  <div class="logo logo--center">

                     <a href="/home ">
                        <img class="logo__image  logo__image--medium " alt="HaVu Studios"
                             src="https://i.imgur.com/aiX1n2n.png" />
                     </a>

                  </div>
               </header>

               <div class="main__content">
                  <article class="animate-floating-labels row">
                     <div class="col col--two" >
                        <section class="section">
                           <div class="section__header">
                              <div class="layout-flex">
                                 <h2 class="section__title layout-flex__item layout-flex__item--stretch">
                                    <i class="fa fa-id-card-o fa-lg section__title--icon hide-on-desktop"></i>
                                    Thông tin nhận hàng
                                 </h2>
                              </div>
                           </div>
                           <div class="section__content" th:object="${customer}">
                              <div class="fieldset">
                                 <div class="field">
                                    <div class="field__input-wrapper">
                                       <label for="email" class="field__label">
                                          Email
                                       </label>
                                       <input th:value="${customer != null ? customer.email : ''}" name="email" id="email"
                                              type="email" class="field__input">
                                    </div>
                                 </div>
                                 <div class="field">
                                    <div class="field__input-wrapper">
                                       <label for="billingName" class="field__label">Họ và tên</label>
                                       <input th:value="${customer != null ? customer.fullName : ''}" name="billingName" id="billingName"
                                              type="text" class="field__input">
                                    </div>
                                 </div>

                                 <div class="field">
                                    <div class="field__input-wrapper field__input-wrapper--connected">
                                       <label for="billingPhone" class="field__label">
                                          Số điện thoại (tùy chọn)
                                       </label>
                                       <input th:value="${customer != null ? customer.phoneNumber : ''}" name="billingPhone" id="billingPhone"
                                              type="tel" class="field__input">
                                    </div>
                                 </div>


                                 <div class="field ">
                                    <div class="field__input-wrapper">
                                       <label for="billingAddress" class="field__label">
                                          Địa chỉ (tùy chọn)
                                       </label>
                                       <input name="billingAddress" id="billingAddress"
                                              type="text" class="field__input">
                                    </div>
                                 </div>

                                 <div class="field field--show-floating-label ">
                                    <div class="field__input-wrapper field__input-wrapper--select2">
                                       <label for="billingProvince" class="field__label">Tỉnh thành</label>
                                       <select name="billingProvince" id="billingProvince"
                                               size="1"
                                               class="field__input field__input--select">
                                          <option value="1"></option>
                                       </select>
                                    </div>
                                 </div>

                                 <div class="field field--show-floating-label ">
                                    <div class="field__input-wrapper field__input-wrapper--select2">
                                       <label for="billingDistrict" class="field__label">
                                          Quận huyện (tùy chọn)
                                       </label>
                                       <select name="billingDistrict"
                                               id="billingDistrict"
                                               size="1"
                                               class="field__input field__input--select">
                                          <option value="2"></option>
                                       </select>
                                    </div>

                                 </div>

                                 <div class="field field--show-floating-label ">
                                    <div class="field__input-wrapper field__input-wrapper--select2">
                                       <label for="billingWard" class="field__label">
                                          Phường xã (tùy chọn)
                                       </label>
                                       <select name="billingWard" id="billingWard"
                                               size="1"
                                               class="field__input field__input--select">
                                          <option value="2"></option>
                                       </select>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </section>

                        <div class="fieldset">
                           <h3 class="visually-hidden">Ghi chú</h3>
                           <div class="field ">
                              <div class="field__input-wrapper">
                                 <label for="note" class="field__label">
                                    Ghi chú (tùy chọn)
                                 </label>
                                 <textarea name="note" id="note" class="field__input"></textarea>
                              </div>
                           </div>
                        </div>
                     </div>

                     <div class="col col--two">
                        <section class="section">
                           <div class="section__header">
                              <div class="layout-flex">
                                 <h2 class="section__title layout-flex__item layout-flex__item--stretch">
                                    <i class="fa fa-truck fa-lg section__title--icon hide-on-desktop"></i>
                                    Vận chuyển
                                 </h2>
                              </div>
                           </div>
                           <div class="section__content">
                              <div class="content-box">
                                 <div class="content-box__row">
                                    <div class="radio-wrapper">
                                       <div class="radio__input">
                                          <input type="radio" class="input-radio"
                                                 name="shippingMethod" id="shippingMethod-768803_0"
                                          >
                                       </div>
                                       <label for="shippingMethod-768803_0" class="radio__label">
                                          <span class="radio__label__primary">
                                             <span>Giao hàng tận nơi</span>
                                          </span>
                                          <span class="radio__label__accessory">
                                             <span class="content-box__emphasis price">
                                                40.000₫
                                             </span>
                                          </span>
                                       </label>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </section>

                        <section class="section">
                           <div class="section__header">
                              <div class="layout-flex">
                                 <h2 class="section__title layout-flex__item layout-flex__item--stretch">
                                    Thanh toán
                                 </h2>
                              </div>
                           </div>
                           <div class="section__content">
                              <div class="content-box">
                                 <div class="content-box__row">
                                    <div class="radio-wrapper">
                                       <div class="radio__input">
                                          <input name="paymentMethod" id="paymentMethod-645389"
                                                 type="radio" class="input-radio"
                                                 data-bind="paymentMethod"
                                                 data-provider-id="4"
                                          >
                                       </div>
                                       <label for="paymentMethod-645389" class="radio__label">
                                          <span class="radio__label__primary">Thu hộ (COD)</span>
                                          <span class="radio__label__accessory">
                                             <span class="radio__label__icon">
                                                <i class="fa-regular fa-money-bill-1"></i>
                                             </span>
                                          </span>
                                       </label>
                                    </div>
                                 </div>

                                 <div class="content-box__row">
                                    <div class="radio-wrapper">
                                       <div class="radio__input">
                                          <input name="paymentMethod" id="paymentMethod-645387"
                                                 type="radio" class="input-radio"
                                                 data-bind="paymentMethod"
                                                 data-provider-id="3"
                                          >
                                       </div>
                                       <label for="paymentMethod-645387" class="radio__label">
                                          <span class="radio__label__primary">Chuyển khoản</span>
                                          <span class="radio__label__accessory">
                                             <span class="radio__label__icon">
                                                <i class="fa-regular fa-money-bill-1"></i>
                                             </span>
                                          </span>
                                       </label>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </section>
                     </div>
                  </article>
               </div>
            </main>

            <aside class="sidebar">
               <div class="sidebar__header">
                  <h2 class="sidebar__title">
                     Đơn hàng (2 sản phẩm)
                  </h2>
               </div>
               <div class="sidebar__content">
                  <div id="order-summary" class="order-summary order-summary--is-collapsed">
                     <div class="order-summary__sections">
                        <div class="order-summary__section order-summary__section--product-list order-summary__section--is-scrollable order-summary--collapse-element">
                           <table class="product-table">
                              <caption class="visually-hidden">Chi tiết đơn hàng</caption>
                              <thead class="product-table__header">
                              <tr>
                                 <th>
                                    <span class="visually-hidden">Ảnh sản phẩm</span>
                                 </th>
                                 <th>
                                    <span class="visually-hidden">Mô tả</span>
                                 </th>
                                 <th>
                                    <span class="visually-hidden">Sổ lượng</span>
                                 </th>
                                 <th>
                                    <span class="visually-hidden">Đơn giá</span>
                                 </th>
                              </tr>
                              </thead>
                              <tbody>

                              <tr class="product" th:each="cartItem : ${cart.cartItems}">
                                 <td class="product__image">
                                    <div class="product-thumbnail">
                                       <div class="product-thumbnail__wrapper" data-tg-static>
                                          <img th:src="${cartItem.product.primaryImage.imagePath}" alt="" class="product-thumbnail__image" />
                                       </div>
                                       <span class="product-thumbnail__quantity" th:text="${cartItem.quantity}"></span>
                                    </div>
                                 </td>
                                 <th class="product__description">
                                    <span class="product__description__name" th:text="${cartItem.product.productName}">
                                    </span>
                                 </th>
                                 <td class="product__price" th:text="${#numbers.formatDecimal(cartItem.quantity * cartItem.product.price, 0, 'COMMA', 0 , 'POINT') + '₫'}">
                                 </td>
                              </tr>

                              </tbody>
                           </table>
                        </div>

                        <div class="order-summary__section order-summary__section--total-lines order-summary--collapse-element"
                             data-define="{subTotalPriceText: '300.000₫'}"
                             data-tg-refresh="refreshOrderTotalPrice" id="orderSummary">
                           <table class="total-line-table">
                              <caption class="visually-hidden">Tổng giá trị</caption>
                              <thead>
                              <tr>
                                 <td><span class="visually-hidden">Mô tả</span></td>
                                 <td><span class="visually-hidden">Giá tiền</span></td>
                              </tr>
                              </thead>
                              <tbody class="total-line-table__tbody">
                              <tr class="total-line total-line--subtotal">
                                 <th class="total-line__name">
                                    Tạm tính
                                 </th>
                                 <td class="total-line__price" th:text="${#numbers.formatDecimal(total, 0 , 'COMMA', 0, 'POINT') + 'đ'}"></td>
                              </tr>

                              <tr class="total-line total-line--shipping-fee">
                                 <th class="total-line__name">
                                    Phí vận chuyển
                                 </th>
                                 <td class="total-line__price" data-bind="getTextShippingPrice()">
                                    40,000đ
                                 </td>
                              </tr>

                              </tbody>
                              <tfoot class="total-line-table__footer">
                              <tr class="total-line payment-due">
                                 <th class="total-line__name">
                                    <span class="payment-due__label-total">
                                       Tổng cộng
                                    </span>
                                 </th>
                                 <td class="total-line__price">
                                    <span class="payment-due__price" th:text="${#numbers.formatDecimal(total + 40000, 0 , 'COMMA', 0, 'POINT') + 'đ'}"></span>
                                 </td>
                              </tr>
                              </tfoot>
                           </table>
                        </div>
                        <div class="order-summary__nav field__input-btn-wrapper hide-on-mobile layout-flex--row-reverse">
                           <button type="submit" class="btn btn-checkout spinner">
                              <span class="spinner-label">ĐẶT HÀNG</span>
                              <svg xmlns="http://www.w3.org/2000/svg" class="spinner-loader">
                                 <use href="#spinner"></use>
                              </svg>
                           </button>


                           <a href="/cart/view" class="previous-link">
                              <i class="previous-link__arrow">❮</i>
                              <span class="previous-link__content">Quay về giỏ hàng</span>
                           </a>

                        </div>
                        <div id="common-alert-sidebar" data-tg-refresh="refreshError">
                           <div class="alert alert--danger hide-on-mobile hide"
                                data-bind-show="!isSubmitingCheckout && isSubmitingCheckoutError"
                                data-bind="submitingCheckoutErrorMessage">
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </aside>
         </div>
      </form>
   </div>
</body>
</html>